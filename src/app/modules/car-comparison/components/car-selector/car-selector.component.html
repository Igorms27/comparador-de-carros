<div class="car-selector">
  <h3>{{ title }}</h3>

  <div
    class="select-group"
    [class.dropdown-open]="showBrandSuggestions && filteredBrands.length > 0"
  >
    <label for="brandSearch">Marca do VeÃ­culo:</label>
    <div class="autocomplete-container">
      <div class="search-wrapper">
        <div class="input-with-logo" [class.has-logo]="selectedBrand">
          <span *ngIf="selectedBrand" class="input-icon">ğŸš—</span>
          <input
            type="text"
            id="brandSearch"
            [(ngModel)]="brandSearch"
            (input)="filterBrands()"
            (focus)="showBrandSuggestions = true"
            placeholder="Digite a marca..."
            class="search-input"
            [class.with-logo]="selectedBrand"
          />
        </div>
        <span class="search-icon">ğŸ”</span>
      </div>
      <div class="suggestions-container" *ngIf="showBrandSuggestions && filteredBrands.length > 0">
        <div
          *ngFor="let brand of filteredBrands"
          class="suggestion-item"
          (click)="selectBrand(brand)"
          [class.active]="brand.codigo === selectedBrand"
        >
          <div class="brand-item">
            <span class="car-icon">ğŸš—</span>
            <span>{{ brand.nome }}</span>
          </div>
        </div>
      </div>
    </div>
  </div>

  <div
    class="select-group"
    *ngIf="selectedBrand"
    [class.dropdown-open]="showModelSuggestions && filteredModels.length > 0"
  >
    <label for="modelSearch">Modelo do VeÃ­culo:</label>
    <div class="autocomplete-container">
      <div class="search-wrapper">
        <input
          type="text"
          id="modelSearch"
          [(ngModel)]="modelSearch"
          (input)="filterModels()"
          (focus)="showModelSuggestions = true"
          placeholder="Digite o modelo..."
          class="search-input"
        />
        <span class="search-icon">ğŸ”</span>
      </div>
      <div class="suggestions-container" *ngIf="showModelSuggestions && filteredModels.length > 0">
        <div
          *ngFor="let model of filteredModels"
          class="suggestion-item"
          (click)="selectModel(model)"
          [class.active]="model.codigo === selectedModel"
        >
          {{ model.nome }}
        </div>
      </div>
    </div>
  </div>

  <div
    class="select-group"
    *ngIf="selectedModel"
    [class.dropdown-open]="showYearSuggestions && filteredYears.length > 0"
  >
    <label for="yearSearch">Ano do VeÃ­culo:</label>
    <div class="autocomplete-container">
      <div class="search-wrapper">
        <input
          type="text"
          id="yearSearch"
          [(ngModel)]="yearSearch"
          (input)="filterYears()"
          (focus)="showYearSuggestions = true"
          placeholder="Digite o ano..."
          class="search-input"
        />
        <span class="search-icon">ğŸ”</span>
      </div>
      <div class="suggestions-container" *ngIf="showYearSuggestions && filteredYears.length > 0">
        <div
          *ngFor="let year of filteredYears"
          class="suggestion-item"
          (click)="selectYear(year)"
          [class.active]="year.codigo === selectedYear"
        >
          {{ year.nome }}
        </div>
      </div>
    </div>
  </div>

  <div *ngIf="error && !isRestoring" class="error">
    {{ error }}
  </div>
</div>
