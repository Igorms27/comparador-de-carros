<app-animated-background></app-animated-background>

<div class="container">
  <h1 class="app-title">Comparador de Pre√ßos FIPE</h1>

  <div class="history-button-container" *ngIf="hasHistory">
    <button class="history-button" (click)="restoreLastComparison()">
      <span class="icon">‚Ü∫</span>
      Restaurar √∫ltima compara√ß√£o
    </button>
  </div>

  <!-- Se√ß√£o "Como funciona" -->
  <div class="how-it-works">
    <h2>Como usar o comparador</h2>
    <div class="steps-container">
      <div class="step">
        <div class="step-number">1</div>
        <div class="step-text">Selecione a marca e modelo do primeiro ve√≠culo</div>
      </div>
      <div class="step">
        <div class="step-number">2</div>
        <div class="step-text">Selecione a marca e modelo do segundo ve√≠culo</div>
      </div>
      <div class="step">
        <div class="step-number">3</div>
        <div class="step-text">Veja a compara√ß√£o detalhada com gr√°ficos de pre√ßos</div>
      </div>
    </div>
  </div>

  <div class="selector-container">
    <div class="selector-item">
      <app-car-selector
        title="Primeiro Ve√≠culo"
        (carSelected)="onFirstCarSelected($event)"
      ></app-car-selector>
    </div>

    <div class="selector-item">
      <app-car-selector
        title="Segundo Ve√≠culo"
        (carSelected)="onSecondCarSelected($event)"
      ></app-car-selector>
    </div>
  </div>

  <!-- Pr√©via do gr√°fico de compara√ß√£o vazia -->
  <div class="chart-preview" *ngIf="!firstCar || !secondCar">
    <h2>Gr√°fico de Compara√ß√£o</h2>
    <div class="empty-chart">
      <div class="chart-placeholder">
        <span class="chart-icon">üìä</span>
        <p>Selecione dois ve√≠culos para visualizar o gr√°fico de compara√ß√£o de pre√ßos</p>
      </div>
    </div>
  </div>

  <!-- Tabela de compara√ß√£o responsiva para mobile -->
  <div class="comparison-details" *ngIf="firstCar && secondCar">
    <h2>Compara√ß√£o dos Ve√≠culos</h2>
    <div class="table-responsive">
      <table>
        <tr>
          <th>Caracter√≠stica</th>
          <th>{{ firstCar.Marca }}</th>
          <th>{{ secondCar.Marca }}</th>
        </tr>
        <tr>
          <td><strong>Modelo</strong></td>
          <td>{{ firstCar.Modelo }}</td>
          <td>{{ secondCar.Modelo }}</td>
        </tr>
        <tr>
          <td><strong>Ano</strong></td>
          <td>{{ firstCar.AnoModelo }}</td>
          <td>{{ secondCar.AnoModelo }}</td>
        </tr>
        <tr>
          <td><strong>Pre√ßo</strong></td>
          <td [style.color]="getValueColor(firstCar.Valor, secondCar.Valor)">
            {{ firstCar.Valor }}
          </td>
          <td [style.color]="getValueColor(secondCar.Valor, firstCar.Valor)">
            {{ secondCar.Valor }}
          </td>
        </tr>
        <tr>
          <td><strong>Combust√≠vel</strong></td>
          <td>{{ firstCar.Combustivel }}</td>
          <td>{{ secondCar.Combustivel }}</td>
        </tr>
        <tr>
          <td><strong>C√≥digo FIPE</strong></td>
          <td>{{ firstCar.CodigoFipe }}</td>
          <td>{{ secondCar.CodigoFipe }}</td>
        </tr>
        <tr>
          <td><strong>M√™s Refer√™ncia</strong></td>
          <td>{{ firstCar.MesReferencia }}</td>
          <td>{{ secondCar.MesReferencia }}</td>
        </tr>
      </table>
    </div>
  </div>

  <app-car-chart
    *ngIf="firstCar && secondCar"
    [firstCar]="firstCar"
    [secondCar]="secondCar"
  ></app-car-chart>

  <!-- Se√ß√£o de dicas de compra -->
  <div class="buying-tips">
    <h2>Dicas para comprar seu carro</h2>
    <div class="tips-container">
      <div class="tip">
        <span class="tip-icon">üí°</span>
        <p>Compare a desvaloriza√ß√£o dos modelos para fazer uma compra mais inteligente</p>
      </div>
      <div class="tip">
        <span class="tip-icon">üí∞</span>
        <p>Verifique o hist√≥rico de pre√ßos para identificar o melhor momento para comprar</p>
      </div>
      <div class="tip">
        <span class="tip-icon">üìä</span>
        <p>Analise os gr√°ficos para entender a tend√™ncia de valoriza√ß√£o/desvaloriza√ß√£o</p>
      </div>
    </div>
  </div>

  <!-- √Årea informativa "Sobre a Tabela FIPE" -->
  <div class="fipe-info">
    <h2>Sobre a Tabela FIPE</h2>
    <p>
      A Tabela FIPE expressa pre√ßos m√©dios de ve√≠culos no mercado nacional, servindo como refer√™ncia
      para negocia√ß√µes ou avalia√ß√µes. Os pre√ßos efetivos de compra e venda podem variar devido a
      regi√£o, conserva√ß√£o, cor, acess√≥rios ou qualquer outro fator relevante para a negocia√ß√£o.
    </p>
    <a href="https://veiculos.fipe.org.br/" target="_blank" class="link-button"
      >Visitar site oficial FIPE</a
    >
  </div>
</div>

<!-- Rodap√© informativo -->
<div
  class="footer-wrapper"
  style="margin-bottom: -5px; position: relative; width: 100vw; margin-left: calc(-50vw + 50%)"
>
  <footer class="app-footer">
    <div class="footer-content">
      <div class="footer-section">
        <h3>Comparador de Pre√ßos FIPE</h3>
        <p>
          Ferramenta gratuita para compara√ß√£o de pre√ßos de ve√≠culos baseados na tabela FIPE oficial.
        </p>
      </div>
      <div class="footer-section">
        <h3>Links √öteis</h3>
        <ul>
          <li><a href="#">Sobre o projeto</a></li>
          <li><a href="https://veiculos.fipe.org.br/" target="_blank">Tabela FIPE Oficial</a></li>
          <li><a href="#">Pol√≠tica de Privacidade</a></li>
        </ul>
      </div>
    </div>
    <div class="footer-bottom">
      <p>&copy; 2023 Comparador FIPE - Desenvolvido por Igor Moreira</p>
    </div>
  </footer>
</div>
